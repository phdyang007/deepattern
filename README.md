# DEEPATTERN+

The repo contains the source code of DeePattern+, a framework developed from:

Haoyu Yang, Piyush Pathak, Frank Gennari, Ya-Chieh Lai and Bei Yu, “DeePattern: Layout Pattern Generation with Transforming Convolutional Auto-Encoder”, ACM/IEEE Design Automation Conference (DAC), Las Vegas, NV, June 2–6, 2019. 



## How To
### DeePattern (TCAE) Train

use ``` make train% ``` to train TCAE model for a the given data set, e.g. ```make traintc1```

- currently we only support catalogs that ```cX,cY <= 24```

- trained models will be stored at ```./models/tc1/```

- some reconstruction samples during training will be available at ```./models/tc1/sample```



### DeePattern (TCAE) Test

use ``` make test% ``` to do inference and generated 1M patterns with noise perturbation, e.g. ```make testtc1```

- a msgpack containing 1M generated patterns will be put at ```./models/tc1/test/noise_data.msgpack```


### DeePattern+ (TCAE+GAN) Train

```make gandata%```

- generate the training set for GAN based on ``` make test% ``` results.

```make gantrain%```

- train gan

### DeePattern+ (TCAE+GAN) Train

```make gantest%```

- connect the generator with reconstion unit do the inference.


### Evaluation 

```make eval%```

- calculate the diversity of the training data and valid topology count after noise perturbation.

### Fake Data Generation

use ``` make fake ``` to generate some faked msgpack training and testing data, if you do not have industry layouts.

- msgpacks will be placed at  ```./data/fake/```

### Train GAN

use ``` make gantrain% ``` to train the gan using valid noise.

### Use GAN to generate noise

use ``` make gangenearte% ``` to generate noise by GAN.

### Test DeePattern using noise generated by GAN

use ``` make gantest% ``` to get pattern using noise generated by GAN.
